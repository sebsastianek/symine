{% extends 'admin/base.html.twig' %}

{% block title %}Edit User - {{ user.login }}{% endblock %}
{% block page_title %}Edit User - {{ user.login }}{% endblock %}

{% block body %}
<div class="max-w-3xl">
    <div class="bg-white rounded-lg shadow p-6">
        <form method="post" action="{{ path('admin_user_edit', {id: user.id}) }}" class="space-y-6">
            <div class="grid grid-cols-2 gap-4">
                <div class="col-span-2">
                    <label for="login" class="block text-sm font-medium text-gray-700 mb-2">
                        Login <span class="text-red-500">*</span>
                    </label>
                    <input
                        type="text"
                        id="login"
                        name="login"
                        required
                        value="{{ user.login }}"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="Username"
                    >
                </div>

                <div>
                    <label for="firstname" class="block text-sm font-medium text-gray-700 mb-2">
                        First Name
                    </label>
                    <input
                        type="text"
                        id="firstname"
                        name="firstname"
                        value="{{ user.firstname }}"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="First name"
                    >
                </div>

                <div>
                    <label for="lastname" class="block text-sm font-medium text-gray-700 mb-2">
                        Last Name
                    </label>
                    <input
                        type="text"
                        id="lastname"
                        name="lastname"
                        value="{{ user.lastname }}"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="Last name"
                    >
                </div>

                <div class="col-span-2">
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
                        New Password
                    </label>
                    <input
                        type="password"
                        id="password"
                        name="password"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        placeholder="Leave blank to keep current password"
                    >
                    <p class="mt-1 text-sm text-gray-500">Leave blank to keep the current password</p>
                </div>

                <div>
                    <label for="language" class="block text-sm font-medium text-gray-700 mb-2">
                        Language
                    </label>
                    <select
                        id="language"
                        name="language"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                        <option value="en" {{ user.language == 'en' ? 'selected' : '' }}>English</option>
                        <option value="fr" {{ user.language == 'fr' ? 'selected' : '' }}>French</option>
                        <option value="de" {{ user.language == 'de' ? 'selected' : '' }}>German</option>
                        <option value="es" {{ user.language == 'es' ? 'selected' : '' }}>Spanish</option>
                        <option value="pl" {{ user.language == 'pl' ? 'selected' : '' }}>Polish</option>
                    </select>
                </div>

                <div>
                    <label for="status" class="block text-sm font-medium text-gray-700 mb-2">
                        Status
                    </label>
                    <select
                        id="status"
                        name="status"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                        <option value="1" {{ user.status == 1 ? 'selected' : '' }}>Active</option>
                        <option value="2" {{ user.status == 2 ? 'selected' : '' }}>Registered</option>
                        <option value="3" {{ user.status == 3 ? 'selected' : '' }}>Locked</option>
                    </select>
                </div>
            </div>

            <div class="border-t border-gray-200 pt-4">
                <div class="flex items-center">
                    <input
                        type="checkbox"
                        id="admin"
                        name="admin"
                        {{ user.admin ? 'checked' : '' }}
                        class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                    >
                    <label for="admin" class="ml-2 block text-sm text-gray-700">
                        Administrator
                    </label>
                </div>
                <p class="mt-1 ml-6 text-sm text-gray-500">User will have full administrative privileges</p>
            </div>

            {% if user.createdOn %}
            <div class="border-t border-gray-200 pt-4">
                <div class="text-sm text-gray-600 space-y-1">
                    <p><strong>Created:</strong> {{ user.createdOn|date('Y-m-d H:i') }}</p>
                    {% if user.lastLoginOn %}
                        <p><strong>Last login:</strong> {{ user.lastLoginOn|date('Y-m-d H:i') }}</p>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                <a href="{{ path('admin_user_index') }}" class="text-gray-600 hover:text-gray-900">
                    Cancel
                </a>
                <button
                    type="submit"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                    Save Changes
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
